/*--------------------------------------------------------------------------------------------------------------------*/

#include <stdio.h>
#include <string.h>

#include "../src/indi_proxy.h"

/*--------------------------------------------------------------------------------------------------------------------*/

int main()
{
    /*----------------------------------------------------------------------------------------------------------------*/

    indi_memory_initialize();

    /*----------------------------------------------------------------------------------------------------------------*/

    indi_proxy_t proxy;

    indi_proxy_initialize(&proxy, 38, NULL);

    for(int i = 0; i < 50; i++)
    {
        printf("\nStep %d]:\n", i);

        indi_proxy_consume(
            &proxy,
            strlen("....................................................<defSwitchVector>foo"),
            "....................................................<defSwitchVector>foo"
        );

        indi_proxy_consume(
            &proxy,
            strlen("</defSwitchVector>........"),
            "</defSwitchVector>........"
        );

        indi_proxy_consume(
            &proxy,
            strlen("...........................................<defNumberVector>foo"),
            "...........................................<defNumberVector>foo"
        );

        indi_proxy_consume(
            &proxy,
            strlen("</defNumberVector>................................"),
            "</defNumberVector>................................"
        );
    }

    indi_proxy_finalize(&proxy);

    /*----------------------------------------------------------------------------------------------------------------*/

    indi_memory_finalize();

    /*----------------------------------------------------------------------------------------------------------------*/

    printf("[SUCCESS]\n");

    return 0;
}

/*--------------------------------------------------------------------------------------------------------------------*/
